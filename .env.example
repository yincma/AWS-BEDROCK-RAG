# AWS Bedrock RAG 系统环境变量配置模板

# ========================================
# 基础配置
# ========================================
PROJECT_NAME=enterprise-rag
ENVIRONMENT=dev
# 注意：不要设置AWS_REGION，它是Lambda保留的环境变量
# Lambda会自动设置AWS_REGION，我们使用REGION作为替代
REGION=us-east-1
LOG_LEVEL=INFO

# ========================================
# AWS 资源配置
# ========================================
# S3 存储桶（由 Terraform 自动生成）
S3_BUCKET=

# Bedrock Knowledge Base（由 Terraform 自动生成）
KNOWLEDGE_BASE_ID=
DATA_SOURCE_ID=

# Bedrock 模型配置
BEDROCK_MODEL_ID=amazon.nova-pro-v1:0

# ========================================
# API 配置
# ========================================
# CORS 配置
CORS_ALLOW_ORIGIN=*
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token
CORS_ALLOW_CREDENTIALS=false

# API Gateway 配置
API_GATEWAY_STAGE=dev
API_TIMEOUT=30000

# ========================================
# Lambda 函数配置
# ========================================
# Lambda 资源配置
LAMBDA_MEMORY_SIZE=1024
LAMBDA_TIMEOUT=300
LAMBDA_RESERVED_CONCURRENCY=-1
LAMBDA_PROVISIONED_CONCURRENCY=0

# Lambda 性能优化
ENABLE_LAMBDA_INSIGHTS=false
ENABLE_COLD_START_OPTIMIZATION=false
ENABLE_SNAP_START=false

# ========================================
# 文档处理配置
# ========================================
# 文件上传配置
ALLOWED_FILE_EXTENSIONS=.pdf,.txt,.docx,.doc,.md,.csv,.json
MAX_FILE_SIZE_MB=100
DOCUMENT_PREFIX=documents/

# 预签名 URL 配置
PRESIGNED_URL_EXPIRY_SECONDS=900

# ========================================
# 安全配置
# ========================================
# 认证配置
COGNITO_USER_POOL_ID=
COGNITO_CLIENT_ID=
COGNITO_DOMAIN=

# 加密配置
ENABLE_ENCRYPTION=true
KMS_KEY_ID=

# ========================================
# 监控和日志配置
# ========================================
# CloudWatch 配置
CLOUDWATCH_NAMESPACE=enterprise-rag
LOG_RETENTION_DAYS=7
ALARM_EMAIL=

# X-Ray 追踪
ENABLE_XRAY=true
TRACING_MODE=Active

# ========================================
# 性能配置
# ========================================
# 缓存配置
ENABLE_CACHE=true
CACHE_TTL_SECONDS=300

# 批处理配置
BATCH_SIZE=25
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0

# ========================================
# 开发配置
# ========================================
# 调试模式
DEBUG_MODE=false

# 本地开发
LOCAL_DEV=false
LOCAL_S3_ENDPOINT=

# ========================================
# 功能开关
# ========================================
ENABLE_WAF=false
ENABLE_SHIELD=false
ENABLE_BACKUP=true
ENABLE_AUTO_SCALING=true

# ========================================
# 成本优化
# ========================================
# S3 生命周期
S3_LIFECYCLE_TRANSITION_DAYS=30
S3_LIFECYCLE_EXPIRATION_DAYS=90

# Lambda 预热
ENABLE_LAMBDA_WARMUP=true
WARMUP_SCHEDULE=rate(5 minutes)

# ========================================
# 错误处理
# ========================================
# 错误通知
ERROR_NOTIFICATION_ENABLED=false
ERROR_NOTIFICATION_TOPIC_ARN=

# 重试策略
ENABLE_SMART_RETRY=true
RETRYABLE_ERROR_CODES=ThrottlingException,RequestLimitExceeded,ServiceUnavailable,RequestTimeout,InternalServerError

# ========================================
# 国际化
# ========================================
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=zh-CN,en-US

# ========================================
# 业务配置
# ========================================
# 查询配置
DEFAULT_TOP_K=5
MAX_TOP_K=20
QUERY_TIMEOUT_SECONDS=60

# 知识库同步
AUTO_SYNC_ENABLED=true
SYNC_SCHEDULE=rate(1 hour)